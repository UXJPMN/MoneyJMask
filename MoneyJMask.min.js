var masks,permitted=/[0-9\,]/g;function addDots(e,t){if(e.length<7)return;let a=e.split(",");t.value=a[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")+","+a[1]}function charRestrict(e,t){var a;if(!t)t=window.event;if(t.keyCode?a=t.keyCode:t.which&&(a=t.which),27==a)return e.blur(),!1;var n=String.fromCharCode(a);if(!t.ctrlKey&&9!=a&&8!=a&&36!=a&&37!=a&&38!=a&&(39!=a||39==a&&"'"==character)&&40!=a){if(n.match(permitted)){const a=e.value.indexOf(",");if(a>-1){if(","===n)return t.preventDefault(),!1;if(e.value.length>a+2&&t.target.selectionStart>a)return t.preventDefault(),!1}return!0}return t.preventDefault(),!1}}function createMask(e){let t=e.value,a=t.indexOf(",");if(0===e.value.length)return;if(","==e.value)return t="0,00",void(e.value=t);if(a<0)return t=`${t},00`,e.value=t,a=t.indexOf(","),void addDots(t,e);0===a&&(t=`0${t}`,e.value=t);let n=e.value.length-a;return 2==n?(t=`${t}0`,e.value=t,void addDots(t,e)):1==n?(t=`${t}00`,e.value=t,void addDots(t,e)):void 0}function setMasks(){masks=document.getElementsByClassName("money-mask");for(let e in masks)masks[e].addEventListener("focus",t=>{document.addEventListener("keypress",t=>{charRestrict(masks[e],t)})}),masks[e].addEventListener("blur",function(){createMask(masks[e])})}document.addEventListener("DOMContentLoaded",e=>{setMasks()});
